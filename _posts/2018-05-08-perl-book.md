---
title: Заметки по книге - Программирование на Perl
categories: perl
tags: books
reference:
  - title: Программирование на Perl
    link: https://yadi.sk/d/FbU4o27k3SG4tE
---

* TOC 
{:toc}

# Типы данных
## Скалярное значение

### Числа
<pre><code class="perl">my $int = 12345;                # число
my $pi = 3.141592;              # число с остатком
my $pi_read = 3.14_15_92_65;    # Число с остатком разделеное _
my $number = 6.02e6;            # экспотенциальная запись
my $plank = .6633E-33;          # ?
my $hex = 0xffff;               # 16-ричное чило
my $bom = 0xef_bb_55;           # 16-ричное чило разделеное _
my $oct = 0751;                 # 8-рично число
my $bin = 0b0101;               # 2-чное число
</code></pre>

### Строки

<pre><code class="perl">my $one = "string";
my $two = 'str';
my $wrap = "wrapped 
string";

my $join = "prefix:$one\r\n"; # пример интерполяции
my $str = 'строка';
my $string = "Это $str с интерполяцией"; 
my $str2 = 'Строка без интерполяции $100';

my $q_1 = q/single-'quote'/;
my $qq_2 = qq/double-"quoted"-$two/; # Двойные кавычки поддерживают интерполяцию

my $smile = ":) -> \x{263A}"; # также есть поддержка юникода
my $ver  = v1.2.3.123; # специальные строки которые обозначают версию
my $here  = <<END;
Если текст большой
его можно записать в переменную
таким образом.
При этом сохраняться все переносы
END
</code></pre>

### Результат команд

<pre><code class="perl">my $exit_code = system('ls test.txt');      # код выполнения программы
my $cmd = `pwd`;                            # вывод команды
</code></pre>

### Ссылки

<pre><code class="perl">my @arr = (1,2,3);
my %hash = ('test', 213, 'test2', 'rwqe');
sub sub { print 1 };

my $arr_ref = \@arr;    # ссылка на именнованный массив
my $hash_ref = \%hash;  # ссылка на именнованный хеш
my $sub_ref = \&sub;    # ссылка на именнованный подпрограмму

my $arr_ref2 = [1,2,3,4];           # ссылка на аннонимный массив
my $hash_ref2 = { test => 1 };      # ссылка на аннонимный хеш
my $sub_ref2 = sub { print 2 };     # ссылка на аннонимный подпрограмму
</code></pre>

## Списочное значение

## Массив
<pre><code class="perl">my @arr = (1,2,3);
</code></pre>

## Хеш
<pre><code class="perl">my %hash = ('test', 213, 'test2', 'rwqe');
</code></pre>

или 

<pre><code class="perl">my %week = {
    'пн' => 'понедельник',
    'вт' => 'вторник',
    'ср' => 'среда',
    'чт' => 'четверг',
    'пт' => 'пятница',
    'сб' => 'суббота',
    'вс' => 'воскресенье',
};
</code></pre>

## Пример вычисления среднего

<pre><code class="perl">#!/usr/local/bin/perl

use uni::perl       qw| :dumper |;

open my $fh, 'grades' or die "Can't open grades: $!";
binmode(STDOUT, ':utf8');

my %grades;
while ( my $line = <$fh> ){
    my ($student, $grade) = split ' ', $line;
    $grades{$student} .= $grade . ' ';
}

close $fh;

foreach my $student ( sort keys %grades ){
    my $scores = 0;
    my $total = 0;
    my @grades = split ' ', $grades{$student};

    for my $grade ( @grades ){
        $total += $grade;
        $scores++;
    }
    my $average = $total / $scores;
    print "$student: $grades{$student}\tСреднее $average\n";
}

exit;
</code></pre>

<pre><code class="perl">$ cat grades 
Nol 25
Ben 76
Clementine 49
Norm 66
Chris 92
Doug 42
Carol 25
Ben 12
Clementine 0
Norm 66

$ perl ./script.pl 
Ben: 76 12  Среднее 44
Carol: 25   Среднее 25
Chris: 92   Среднее 92
Clementine: 49 0    Среднее 24.5
Doug: 42    Среднее 42
Nol: 25     Среднее 25
Norm: 66 66     Среднее 66
</code></pre>

# открытие/закрытие файла

<pre><code class="perl">cat perl/script.pl

open my $fh, '>', './test2'; # создание и запись данных в файл
print $fh "hello\n";

close $fh;

open my $fh, '<', './test'; # чтение существующего файла

my @test = <$fh>;
print "@test" . "\n";
close $fh;
</code></pre>

<pre><code class="perl">
</code></pre>